@import 'tailwindcss';
@import './agents-styles.css' layer(base);


@plugin '@tailwindcss/typography';
@plugin 'tailwindcss-animate';

@source "../**/*.{ts,tsx}";
@source "../../../node_modules/streamdown/dist/*.js";

@custom-variant dark (&:is(.dark *));

@theme {
  --breakpoint-min-420: 420px;

  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));
  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));

  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));

  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));

  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));

  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));

  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));

  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));

  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));

  --color-tl-background: hsl(var(--tl-background));
  --color-input-background: hsl(var(--input-background));

  --color-plan-mode: hsl(var(--plan-mode));
  --color-plan-mode-foreground: hsl(var(--plan-mode-foreground));

  --radius-lg: var(--radius);
  --radius-md: calc(var(--radius) - 2px);
  --radius-sm: calc(var(--radius) - 4px);
}

/*
  The default border color has changed to `currentcolor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentcolor);
  }
}

@layer base {
  :root {
    /* HS Light theme - emerald green accent */
    /* Main content: white, Sidebar: #fafafa for subtle layer separation */
    --background: 0 0% 100%;
    --foreground: 0 0% 9%;
    --card: 0 0% 100%;
    --card-foreground: 0 0% 9%;
    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 9%;
    --primary: 152 100% 39%;
    /* #00C853 - emerald green */
    --primary-foreground: 0 0% 100%;
    --secondary: 0 0% 96%;
    --secondary-foreground: 0 0% 9%;
    --muted: 0 0% 96%;
    --muted-foreground: 0 0% 45%;
    --accent: 0 0% 96%;
    --accent-foreground: 0 0% 9%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;
    --border: 0 0% 92%;
    --input: 0 0% 92%;
    --input-background: 0 0% 100%;
    --ring: 152 100% 39%;
    /* Same as primary - green focus ring */
    --selection: 152 100% 39% / 0.2;
    /* Text selection background - primary at 20% */
    --radius: 0.5rem;
    /* Plan Mode Colors */
    --plan-mode: 33 83% 67%;
    --plan-mode-foreground: 0 0% 8%;
    /* Timeline/Sidebar background - very subtle gray #fafafa */
    --tl-background: 0 0% 98%;
  }

  .dark {
    /* HS Dark theme - emerald green accent */
    /* Main content: #0a0a0a, Sidebar: #141414 for layer separation */
    --background: 0 0% 4%;
    --foreground: 0 0% 90%;
    --card: 0 0% 4%;
    --card-foreground: 0 0% 90%;
    --popover: 0 0% 10%;
    --popover-foreground: 0 0% 90%;
    --primary: 152 100% 39%;
    /* #00C853 - emerald green */
    --primary-foreground: 0 0% 0%;
    --secondary: 0 0% 15%;
    --secondary-foreground: 0 0% 90%;
    --muted: 0 0% 18%;
    --muted-foreground: 0 0% 64%;
    --accent: 0 0% 15%;
    --accent-foreground: 0 0% 90%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;
    --border: 0 0% 15%;
    --input: 0 0% 15%;
    --input-background: 0 0% 10%;
    --ring: 152 100% 39%;
    /* Same as primary - green focus ring */
    --selection: 152 100% 39% / 0.25;
    /* Text selection background - primary at 25% */
    /* Plan Mode Colors */
    --plan-mode: 33 83% 67%;
    --plan-mode-foreground: 0 0% 8%;
    /* Timeline/Sidebar background - slightly lighter for layer separation */
    --tl-background: 0 0% 8%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    font-feature-settings:
      "rlig" 1,
      "calt" 1;
  }
}

/* Search highlight styles */
.search-highlight {
  background-color: rgb(250 204 21 / 0.35) !important;
  color: inherit !important;
  border-radius: 2px;
}

.search-highlight-current {
  background-color: rgb(250 204 21 / 0.85) !important;
  color: hsl(0 0% 5%) !important;
}

/* CSS Custom Highlight API for content search */
::highlight(content-search) {
  background-color: rgb(250 204 21 / 0.35);
  color: inherit;
}

::highlight(content-search-current) {
  background-color: rgb(250 204 21 / 0.85);
  color: hsl(0 0% 5%);
}

/* Memory router - scroll-to-target highlight pulse */
.router-highlight {
  animation: router-highlight-pulse 3s ease-out;
}

@keyframes router-highlight-pulse {
  0% { background-color: rgb(59 130 246 / 0.2); }
  100% { background-color: transparent; }
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: hsl(var(--muted-foreground) / 0.3);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: hsl(var(--muted-foreground) / 0.5);
}

/* Disable text selection on UI elements */
.no-select {
  user-select: none;
  -webkit-user-select: none;
}

/* Hide scrollbar but keep scroll functionality */
.scrollbar-hide {
  -ms-overflow-style: none; /* IE and Edge */
  scrollbar-width: none; /* Firefox */
}

.scrollbar-hide::-webkit-scrollbar {
  display: none; /* Chrome, Safari, Opera */
}

/* Drag region for window */
.drag-region {
  -webkit-app-region: drag;
}

.no-drag {
  -webkit-app-region: no-drag;
}

/* Chroma gradient animation for special keywords */
@keyframes chroma-slide {
  0% {
    background-position: 100% 0;
  }
  40% {
    background-position: 0% 0;
  }
  45% {
    background-position: 0% 0;
  }
  46% {
    background-position: 100% 0;
  }
  100% {
    background-position: 100% 0;
  }
}

.chroma-text {
  background-image: linear-gradient(
    90deg,
    #0a0a0a 0%,
    #0a0a0a 30%,
    #6366f1 42%,
    #8b5cf6 50%,
    #a855f7 58%,
    #0a0a0a 70%,
    #0a0a0a 100%
  );
  background-size: 300% 100%;
  background-position: 100% 0;
  background-clip: text;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  color: transparent;
}

.chroma-text-animate {
  animation: chroma-slide 2s ease-out infinite;
}

/* Dark theme chroma colors */
.dark .chroma-text {
  background-image: linear-gradient(
    90deg,
    #fafafa 0%,
    #fafafa 30%,
    #818cf8 42%,
    #a78bfa 50%,
    #c084fc 58%,
    #fafafa 70%,
    #fafafa 100%
  );
}

/* Sonner Toast Styling - Google-style layout */
[data-sonner-toaster] {
  --normal-bg: hsl(var(--popover));
  --normal-text: hsl(var(--popover-foreground));
  --normal-border: hsl(var(--border));
  --border-radius: var(--radius);
  /* Override rich colors - all toasts should be neutral */
  --success-bg: hsl(var(--popover));
  --success-border: hsl(var(--border));
  --success-text: hsl(var(--popover-foreground));
  --info-bg: hsl(var(--popover));
  --info-border: hsl(var(--border));
  --info-text: hsl(var(--popover-foreground));
  --warning-bg: hsl(var(--popover));
  --warning-border: hsl(var(--border));
  --warning-text: hsl(var(--popover-foreground));
  --error-bg: hsl(var(--popover));
  --error-border: hsl(var(--border));
  --error-text: hsl(var(--popover-foreground));
}

[data-sonner-toast][data-styled="true"] {
  padding: 12px 16px;
  padding-right: 32px;
  gap: 8px;
  align-items: flex-start;
  flex-wrap: wrap;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

/* Icon on the left */
[data-sonner-toast] [data-icon] {
  margin-top: 1px;
  color: hsl(var(--muted-foreground));
  width: 16px;
  height: 16px;
}

[data-sonner-toast] [data-icon] svg {
  width: 16px;
  height: 16px;
}

/* Loading spinner - match icon size */
[data-sonner-toast] .sonner-loading-wrapper {
  --size: 16px;
}

[data-sonner-toast] .sonner-loading-bar {
  background: hsl(var(--muted-foreground));
}

/* Content wrapper - take remaining space */
[data-sonner-toast] [data-content] {
  flex: 1;
  min-width: 0;
}

/* Title styling */
[data-sonner-toast] [data-title] {
  font-weight: 500;
  font-size: 14px;
  line-height: 1.4;
}

/* Description styling */
[data-sonner-toast] [data-description] {
  color: hsl(var(--muted-foreground));
  font-size: 13px;
  line-height: 1.4;
}

/* Action button - on its own row at the bottom right */
[data-sonner-toast][data-styled="true"] [data-button] {
  position: absolute;
  bottom: 12px;
  right: 8px;
  background: transparent !important;
  color: hsl(var(--foreground)) !important;
  font-weight: 500;
  font-size: 13px;
  padding: 4px 12px;
  height: auto;
  border: 1px solid hsl(var(--border)) !important;
  border-radius: 6px;
  margin: 0 !important;
  transition: background-color 150ms ease-out, transform 150ms ease-out;
}

[data-sonner-toast][data-styled="true"] [data-button]:hover {
  background: hsl(var(--foreground) / 0.1) !important;
}

[data-sonner-toast][data-styled="true"] [data-button]:active {
  transform: scale(0.97);
}

/* Add bottom padding when button exists */
[data-sonner-toast][data-styled="true"]:has([data-button]) {
  padding-bottom: 44px;
}

/* Close button - inside toast, top right corner */
[data-sonner-toast] [data-close-button] {
  position: absolute !important;
  top: 8px !important;
  right: 8px !important;
  left: unset !important;
  transform: none !important;
  background: transparent !important;
  border: none !important;
  border-radius: 4px !important;
  color: hsl(var(--muted-foreground));
  width: 20px;
  height: 20px;
}

[data-sonner-toast] [data-close-button]:hover {
  color: hsl(var(--foreground));
  background: hsl(var(--accent)) !important;
}

/* Terminal link popup */
.xterm-link-popup {
  font-family: var(--font-geist-mono), "Geist Mono", ui-monospace, monospace;
  font-size: 12px;
  line-height: 1.4;
  padding: 4px 8px;
  border-radius: 6px;
  background: hsl(var(--popover));
  border: 1px solid hsl(var(--border));
  color: hsl(var(--popover-foreground));
  position: absolute;
  z-index: 1000;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  pointer-events: auto;
}
